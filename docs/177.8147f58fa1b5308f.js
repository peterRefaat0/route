"use strict";(self.webpackChunkfreshcart=self.webpackChunkfreshcart||[]).push([[177],{5177:(h,c,n)=>{n.r(c),n.d(c,{PaymentComponent:()=>l});var m=n(6814),e=n(95),t=n(4769),_=n(1120),s=n(6286);let l=(()=>{var a;class r{constructor(o,u){this._ActivatedRoute=o,this._CartService=u,this.cartId="",this.orderForm=new e.cw({details:new e.NI(""),phone:new e.NI(""),city:new e.NI("")})}handleForm(){this._CartService.checkOut(this.cartId,this.orderForm.value).subscribe({next:o=>{"success"==o.status&&window.open(o.session.url,"_self")}})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:o=>{this.cartId=o.get("id"),console.log(this.cartId)}})}}return(a=r).\u0275fac=function(o){return new(o||a)(t.Y36(_.gz),t.Y36(s.N))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-payment"]],standalone:!0,features:[t.jDz],decls:18,vars:1,consts:[[1,"w-75","mx-auto","rounded","shadow","p-3","bg-main-light","mb-3"],[3,"formGroup","ngSubmit"],[1,"form-item"],["for","details"],["type","text","id","details","formControlName","details",1,"form-control"],["for","phone"],["type","tel","id","phone","formControlName","phone",1,"form-control"],["for","city"],["type","text","id","city","formControlName","city",1,"form-control"],[1,"main-btn","mt-3"]],template:function(o,u){1&o&&(t.TgZ(0,"section",0)(1,"h1"),t._uU(2,"CheckOut Session"),t.qZA(),t.TgZ(3,"form",1),t.NdJ("ngSubmit",function(){return u.handleForm()}),t.TgZ(4,"div",2)(5,"label",3),t._uU(6,"details"),t.qZA(),t._UZ(7,"input",4),t.qZA(),t.TgZ(8,"div",2)(9,"label",5),t._uU(10,"phone"),t.qZA(),t._UZ(11,"input",6),t.qZA(),t.TgZ(12,"div",2)(13,"label",7),t._uU(14,"city"),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"button",9),t._uU(17,"CheckOut"),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("formGroup",u.orderForm))},dependencies:[m.ez,e.UX,e._Y,e.Fj,e.JJ,e.JL,e.sg,e.u]}),r})()},6286:(h,c,n)=>{n.d(c,{N:()=>_});var m=n(5619),e=n(4769),t=n(9862);let _=(()=>{var s;class l{constructor(r){this._HttpClient=r,this.baseUrl="https://ecommerce.routemisr.com/api/v1/",this.cartNumber=new m.X(0)}addToCart(r){return this._HttpClient.post(this.baseUrl+"cart",{productId:r})}getCartUser(){return this._HttpClient.get(this.baseUrl+"cart")}removeCartItem(r){return this._HttpClient.delete(this.baseUrl+`cart/${r}`)}updateCartCount(r,i){return this._HttpClient.put(this.baseUrl+`cart/${r}`,{count:i})}clearCart(){return this._HttpClient.delete(this.baseUrl+"cart")}checkOut(r,i){return this._HttpClient.post(this.baseUrl+`orders/checkout-session/${r}?url=https://github.com/ahmed-menisy/fresh-live-route`,{shippingAddress:i})}}return(s=l).\u0275fac=function(r){return new(r||s)(e.LFG(t.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),l})()}}]);